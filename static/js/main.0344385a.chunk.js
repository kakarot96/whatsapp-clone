(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/whatsapp_bg.adbccee0.png"},121:function(e,t,a){"use strict";a.r(t);var n,c=a(0),o=a.n(c),r=a(29),l=a.n(r),i=(a(78),a(79),a(15)),s=a(138),m=a(32),u=a.n(m),p=a(43),f=a.n(p),d=a(62),E=a.n(d),b=a(61),h=a.n(b),g=a(134),x=a(141),v=a(14),y=a(135);!function(e){e.DIVIDER="#ededed",e.ICON="#919191",e.BORDER="rgba(0,0,0,.2)",e.SENTMESSAGE="#dcf8c8"}(n||(n={}));var O=a(18),S=Object(O.atom)({key:"userState",default:null}),j=Object(g.a)((function(e){return Object(x.a)({})})),w=Object(v.a)({root:{padding:"8px",color:"".concat(n.ICON)}})(y.a),R=Object(v.a)({root:{marginLeft:"7px"}})(w);var I=function(){var e=Object(O.useRecoilState)(S),t=Object(i.a)(e,2),a=t[0];return t[1],j(),o.a.createElement(s.a,{display:"flex",justifyContent:"space-between",px:2,py:1.25,bgcolor:n.DIVIDER},o.a.createElement(w,{style:{padding:"0px"}},a?o.a.createElement("img",{src:JSON.parse(a).photoURL,style:{width:"35px",height:"35px",borderRadius:"50%"}}):o.a.createElement(u.a,{style:{fontSize:"40px"}})),o.a.createElement(s.a,{display:"flex"},o.a.createElement(R,null,o.a.createElement(h.a,null)),o.a.createElement(R,null,o.a.createElement(E.a,null)),o.a.createElement(R,null,o.a.createElement(f.a,null))))},N=a(139),D=a(44),k=a.n(D),C=Object(g.a)((function(e){return Object(x.a)({margin:{margin:e.spacing(1)}})}));var B=function(){var e=C();return o.a.createElement(s.a,{bgcolor:"#f6f6f6",p:1},o.a.createElement(s.a,{display:"flex",bgcolor:"white",borderRadius:"20px",height:"35px"},o.a.createElement(y.a,null,o.a.createElement(k.a,{style:{fontSize:"18px"}})),o.a.createElement(N.a,{className:e.margin,placeholder:"Search or start new chat",inputProps:{"aria-label":"naked"}})))},M=a(136),z=a(36),T=Object(g.a)((function(e){return Object(x.a)({chatListBox:{"&::-webkit-scrollbar":{width:"5px !important",height:"5px !important"},"&::-webkit-scrollbar-thumb":{backgroundColor:"".concat(n.BORDER),height:"5px !important"}},chatListItemBox:{"&:hover":{backgroundColor:"#ededed"},"&:active":{backgroundColor:"#ebebeb"},cursor:"pointer"}})}));function L(e){var t=T();return o.a.createElement(s.a,{display:"flex",className:t.chatListItemBox},o.a.createElement(s.a,null,o.a.createElement(u.a,{style:{fontSize:"49px",padding:"8px",color:"".concat(n.ICON)}})),o.a.createElement(s.a,{borderBottom:"1px solid #efefef",flex:1,display:"flex",alignItems:"center"},o.a.createElement(s.a,{display:"flex",flexDirection:"column"},o.a.createElement(M.a,{variant:"body1"},e.title),o.a.createElement(M.a,{variant:"body2"},e.subtitle)),o.a.createElement(s.a,null)))}var A=function(e){var t=T();return o.a.createElement(s.a,{flex:1,overflow:"auto",className:t.chatListBox},e.chatRooms&&e.chatRooms.map((function(e,t){return o.a.createElement(z.b,{to:"/rooms/".concat(e.id),style:{textDecoration:"none",color:"unset"}},o.a.createElement(L,{title:e.data.name,subtitle:"This is the last message"}))})))},V=a(34),W=a.n(V),G=W.a.initializeApp({apiKey:"AIzaSyCbQHgZzSB5A4-7tqCuoWo4pEi92x3Qixc",authDomain:"whatsapp-clone-f85be.firebaseapp.com",databaseURL:"https://whatsapp-clone-f85be.firebaseio.com",projectId:"whatsapp-clone-f85be",storageBucket:"whatsapp-clone-f85be.appspot.com",messagingSenderId:"229034256428",appId:"1:229034256428:web:642d66b1f0b5e27c8e0989",measurementId:"G-SGCVG85KW0"}).firestore(),J=W.a.auth(),U=new W.a.auth.GoogleAuthProvider,P=G;var F=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){P.collection("chatrooms").onSnapshot((function(e){var t=e.docs.map((function(e){return{id:e.id,data:e.data()}}));r(t)}))}),[]),o.a.createElement(s.a,{flex:.3,display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(n.DIVIDER)},o.a.createElement(I,null),o.a.createElement(B,null),o.a.createElement(A,{chatRooms:a}))},H=a(63),K=a.n(H);var Q=o.a.memo((function(e){return o.a.createElement(s.a,{display:"flex",justifyContent:"space-between",px:2,py:1.25,bgcolor:n.DIVIDER,border:"1px solid ".concat(n.BORDER)},o.a.createElement(s.a,{display:"flex"},o.a.createElement(w,{style:{padding:"0px",marginRight:"15px",height:"40px"}},o.a.createElement(u.a,{style:{fontSize:"40px"}})),o.a.createElement(s.a,{display:"flex",flexDirection:"column",justifyContent:"center"},o.a.createElement(M.a,{variant:"body1"},e.chatRoomName))),o.a.createElement(s.a,{display:"flex"},o.a.createElement(R,null,o.a.createElement(k.a,null)),o.a.createElement(R,null,o.a.createElement(K.a,null)),o.a.createElement(R,null,o.a.createElement(f.a,null))))})),q=Object(g.a)((function(e){return Object(x.a)({chatWindowBox:{backgroundImage:"url(".concat(a(120),")")},chatMessageTime:{marginLeft:"10px",position:"absolute",bottom:"4px",lineHeight:1,right:"4px",fontSize:"10px"},chatMessageText:{marginRight:"10px"},sentMessage:{backgroundColor:"".concat(n.SENTMESSAGE),marginLeft:"auto"}})})),Z=Object(v.a)({root:{fontFamily:"Segoe UI"}})(M.a);function $(e){var t=q();return o.a.createElement(s.a,{className:"sent"===e.type?t.sentMessage:"",position:"relative",bgcolor:"white",width:"fit-content",p:1,pr:5,borderRadius:"6px",my:.25},o.a.createElement(Z,{variant:"caption",className:t.chatMessageText},e.message),o.a.createElement(Z,{variant:"overline",className:t.chatMessageTime},"02:41"))}var _=function(e){var t=q();return o.a.createElement(s.a,{flex:1,overflow:"auto",className:t.chatWindowBox,p:4},e.messages&&e.messages.map((function(t,a){return o.a.createElement($,{type:e.userName===t.name&&"sent",key:t.message,message:t.message,time:new Date(t.timestamp&&t.timestamp.toDate().toUTCString())})})))},X=a(65),Y=a.n(X),ee=a(64),te=a.n(ee),ae=Object(g.a)((function(e){return Object(x.a)({margin:{margin:"3px 0px 3px 16px"}})}));var ne=function(e){var t=ae(),a=Object(c.useState)(),r=Object(i.a)(a,2),l=r[0],m=r[1];return o.a.createElement(s.a,{bgcolor:"#f6f6f6",p:1,display:"flex",alignItems:"center"},o.a.createElement(y.a,null,o.a.createElement(te.a,{style:{fontSize:"26px"}})),o.a.createElement(s.a,{flex:1,mx:1,bgcolor:"white",borderRadius:"20px",height:"35px",border:"1px solid ".concat(n.DIVIDER)},o.a.createElement("form",null,o.a.createElement(N.a,{value:l,onChange:function(e){m(e.target.value)},className:t.margin,placeholder:"Search or start new chat",inputProps:{"aria-label":"naked"}}),o.a.createElement("button",{type:"submit",style:{display:"none"},onClick:function(t){t.preventDefault(),l&&l.length>0&&e.sendMessage(l),m("")}}))),o.a.createElement(y.a,null,o.a.createElement(Y.a,{style:{fontSize:"26px"}})))},ce=a(6);var oe=function(){var e=Object(ce.f)(),t=Object(c.useState)(),a=Object(i.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(),m=Object(i.a)(l,2),u=m[0],p=m[1],f=Object(O.useRecoilState)(S),d=Object(i.a)(f,2),E=d[0];return d[1],Object(c.useEffect)((function(){e&&(P.collection("chatrooms").doc("".concat(e.id)).onSnapshot((function(e){r(e.data().name)})),P.collection("chatrooms").doc("".concat(e.id)).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){p(e.docs.map((function(e){return e.data()})))})))}),[e]),o.a.createElement(s.a,{flex:.7,display:"flex",flexDirection:"column"},o.a.createElement(Q,{chatRoomName:n}),o.a.createElement(_,{userName:JSON.parse(E).displayName,messages:u}),o.a.createElement(ne,{sendMessage:function(t){if(E){var a=JSON.parse(E);P.collection("chatrooms").doc("".concat(e.id)).collection("messages").add({message:t,name:a.displayName,timestamp:W.a.firestore.FieldValue.serverTimestamp()})}}}))},re=a(137);var le=function(e){var t=Object(O.useRecoilState)(S),a=Object(i.a)(t,2),n=(a[0],a[1]);return o.a.createElement("div",null,o.a.createElement(re.a,{onClick:function(){J.signInWithPopup(U).then((function(e){console.log(e),setTimeout((function(){n(JSON.stringify(e.user))}),2e3)})).catch((function(e){console.log(e)}))}},"Sign In"))};var ie=function(e){var t=Object(O.useRecoilState)(S),a=Object(i.a)(t,2),n=a[0],c=a[1];return o.a.createElement(s.a,{height:"inherit",display:"flex"},n?o.a.createElement(z.a,null,o.a.createElement(F,null),o.a.createElement(ce.c,null,o.a.createElement(ce.a,{path:"/rooms/:id"},o.a.createElement(oe,null)))):o.a.createElement(le,{setUser:c}))};var se=function(){return o.a.createElement("div",{className:"App",style:{height:"100vh",overflow:"hidden"}},o.a.createElement(O.RecoilRoot,null,o.a.createElement(ie,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(121)},78:function(e,t,a){},79:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.0344385a.chunk.js.map